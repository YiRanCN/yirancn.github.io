<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-study/db/SQL/OpenGauss">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">OpenGauss | YiRanCN</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yirancn.github.io/docs/study/db/SQL/OpenGauss/"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OpenGauss | YiRanCN"><meta data-rh="true" name="description" content="官网 https://opengauss.org/zh/"><meta data-rh="true" property="og:description" content="官网 https://opengauss.org/zh/"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yirancn.github.io/docs/study/db/SQL/OpenGauss/"><link data-rh="true" rel="alternate" href="https://yirancn.github.io/docs/study/db/SQL/OpenGauss/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://yirancn.github.io/docs/study/db/SQL/OpenGauss/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="YiRanCN RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="YiRanCN Atom Feed">




<meta name="keywords" content="YiRanCN 云平台开发者">
<meta name="description" content="YiRanCN 云平台开发者"><link rel="stylesheet" href="/assets/css/styles.3c78678d.css">
<link rel="preload" href="/assets/js/runtime~main.48d4b20b.js" as="script">
<link rel="preload" href="/assets/js/main.b2826b8f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Jiot.cloud" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Jiot.cloud" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Jiot.cloud</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/study/">笔记</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/about/">关于</a><a href="https://github.com/YiRanCN" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/study/">学无止境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/fe/">前端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/back/">后端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/study/db/">数据库</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/">概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/综合/">综合</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/study/db/NewSQL/TiDB/">NewSQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/study/db/NoSQL/Cassandra/">NoSQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/study/db/OLAP/综合概述/">OLAP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/study/db/SQL/综合概述/">SQL</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/综合概述/">综合概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/Kingbase/">Kingbase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/MariaDB/">MariaDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/MySQL-笔记/">MySQL 笔记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/MySQL/">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/study/db/SQL/OpenGauss/">OpenGauss</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/PostgreSQL/">PostgreSQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/达梦-主备部署/">达梦-主备部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/达梦-单机部署/">达梦-单机部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study/db/SQL/达梦/">达梦数据库</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/study/db/全文搜索引擎/综合概述/">全文搜索引擎</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/study/db/时序数据库/InfluxDB/">时序数据库</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/study/db/驱动/ApacheShardingSphere/">驱动</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/program/">编程语言/工具</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/devops/">系统运维</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/hard/">硬件/嵌入式</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/think/">编程思想</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/docker/">Docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/competitive/">竞品分析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/system/">操作系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/net/IPV6/">网络</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/encryption/ASN.1/">加解密</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/ai/">人工智能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/study/other/字节序/">其他</a></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">数据库</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SQL</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">OpenGauss</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>OpenGauss</h1><p>官网 <a href="https://opengauss.org/zh/" target="_blank" rel="noopener noreferrer">https://opengauss.org/zh/</a></p><p>文档 <a href="https://docs.opengauss.org/zh/" target="_blank" rel="noopener noreferrer">https://docs.opengauss.org/zh/</a></p><p>集群方案 <a href="https://docs.opengauss.org/zh/docs/5.0.0/docs/DatabaseAdministrationGuide/openGauss%E5%B8%B8%E8%A7%81%E4%B8%BB%E5%A4%87%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88%E7%AE%80%E4%BB%8B.html" target="_blank" rel="noopener noreferrer">https://docs.opengauss.org/zh/docs/5.0.0/docs/DatabaseAdministrationGuide/openGauss%E5%B8%B8%E8%A7%81%E4%B8%BB%E5%A4%87%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88%E7%AE%80%E4%BB%8B.html</a></p><p>对标的是PostgreSQL</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="常用的工具">常用的工具<a href="#常用的工具" class="hash-link" aria-label="常用的工具的直接链接" title="常用的工具的直接链接">​</a></h3><ul><li>gsql 这是 OpenGauss 数据库的交互式客户端工具，用于连接数据库并执行 SQL 命令。\q（在 gsql 中使用）：用于退出gsql交互式客户端。</li><li>gs_dump 用于备份数据库。</li><li>gs_dumpall：用于备份整个数据库系统，包括所有数据库和用户信息等。</li><li>gs_restore：用于恢复数据库备份。</li><li>gs_om是 OpenGauss 数据库提供的一个重要的运维管理工具。它主要用于数据库<strong>集群</strong>的安装、启动、停止、状态查看以及配置管理等操作，帮助管理员高效地维护 OpenGauss 数据库环境。<ul><li>gs_om --help 不同版本，可能参数不一样，使用此命令具体查看</li><li>gs_om -t start 它会按照预先配置的方式启动整个 OpenGauss 数据库集群。在启动过程中，gs_om会检查集群节点的状态，依次启动各个节点上的数据库服务。</li><li>gs_om -t stop 停止集群</li><li>gs_om -t status 查看集群状态</li><li>gs_om -t refreshconf 重新加载集群配置</li></ul></li><li>gs_ctl gs_ctl是 OpenGauss 数据库中的一个重要的控制工具。它主要用于对<strong>单个数据库节点</strong>进行管理和控制，包括启动、停止、重启数据库实例，以及检查数据库状态、故障恢复等操作。<ul><li>gs_ctl --help 不同版本，可能参数不一样，使用此命令具体查看</li><li>gs_ctl start -D DATADIR 启动</li><li>gs_ctl stop -D DATADIR 停止</li><li>gs_ctl restart -D DATADIR 重启</li><li>gs_ctl status -D DATADIR 状态检查</li><li>gs_ctl reload -D DATADIR 重新加载配置文件，而无需重启</li><li>gs_ctl query -D DATADIR 查询节点信息</li><li>gs_ctl switchover -D DATADIR 在备节点执行，备节点会切换到主节点</li><li>cat postgresql.conf|grep -v &#x27;^\s*#&#x27;|grep -v &quot;^$&quot;  查看配置文件去掉注释行</li></ul></li><li>物理备份 gs_basebackup</li><li>逻辑备份 gs_dump gs_dumpall，没有增量备份</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何查看版本">如何查看版本<a href="#如何查看版本" class="hash-link" aria-label="如何查看版本的直接链接" title="如何查看版本的直接链接">​</a></h3><p>执行SQL，select version();</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何查看最大连接数">如何查看最大连接数<a href="#如何查看最大连接数" class="hash-link" aria-label="如何查看最大连接数的直接链接" title="如何查看最大连接数的直接链接">​</a></h3><p>执行SQL，SELECT * FROM pg_settings WHERE name = &#x27;max_connections&#x27;;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何修改最大连接数">如何修改最大连接数<a href="#如何修改最大连接数" class="hash-link" aria-label="如何修改最大连接数的直接链接" title="如何修改最大连接数的直接链接">​</a></h3><p>修改postgresql.conf文件的max_connections参数</p><p>不一定会成功，需要查看日志或者再查询一遍看看效果</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改最大连接数报错">修改最大连接数报错<a href="#修改最大连接数报错" class="hash-link" aria-label="修改最大连接数报错的直接链接" title="修改最大连接数报错的直接链接">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-05-14 </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:02:06.004 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> localhost </span><span class="token number" style="color:#36acaa">140450292528512</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0</span><span class="token comment" style="color:#999988;font-style:italic">#0]  0 [CACHE] LOG:  set data cache  size(402653184)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-05-14 </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:02:06.247 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> localhost </span><span class="token number" style="color:#36acaa">140450292528512</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0</span><span class="token comment" style="color:#999988;font-style:italic">#0]  0 [BACKEND] FATAL:  could not create semaphores: No space left on device</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-05-14 </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:02:06.247 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> localhost </span><span class="token number" style="color:#36acaa">140450292528512</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0</span><span class="token comment" style="color:#999988;font-style:italic">#0]  0 [BACKEND] DETAIL:  Failed system call was semget(5432129, 17, 03600).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-05-14 </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:02:06.247 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> localhost </span><span class="token number" style="color:#36acaa">140450292528512</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0</span><span class="token comment" style="color:#999988;font-style:italic">#0]  0 [BACKEND] HINT:  This error does *not* mean that you have run out of disk space.  It occurs when either the system limit for the maximum number of semaphore sets (SEMMNI), or the system wide maximum number of semaphores (SEMMNS), would be exceeded.  You need to raise the respective kernel parameter.  Alternatively, reduce openGauss&#x27;s consumption of semaphores by reducing its max_connections parameter.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        The openGauss documentation contains </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> information about configuring your system </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> openGauss.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-05-14 </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:02:06.247 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> localhost </span><span class="token number" style="color:#36acaa">140450292528512</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0</span><span class="token comment" style="color:#999988;font-style:italic">#0]  0 [BACKEND] BACKTRACELOG:  tid[1]&#x27;s backtrace:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">+0xe3a41e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87d3c041e</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_Z9errfinishiz+0x441</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87d3b8651</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">+0xbb6618</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87d13c618</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_Z17PGSemaphoreCreateP15PGSemaphoreData+0x9c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87d13c93c</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_Z14InitProcGlobalv+0x7dd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87e18bddd</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_Z31CreateSharedMemoryAndSemaphoresbi+0x3a5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87e165605</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_Z14PostmasterMainiPPc+0x183f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87d982a4f</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">main+0x3f2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87ce545f2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /usr/lib64/libc.so.6</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">+0x2d210</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x7fbd21d16210</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /usr/lib64/libc.so.6</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__libc_start_main+0x7c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x7fbd21d162bc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gaussdb</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_start+0x25</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">0x55c87cec57f5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Use addr2line to get pretty </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> name and line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-05-14 </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:02:06.342 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">unknown</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> localhost </span><span class="token number" style="color:#36acaa">140450292528512</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:0</span><span class="token comment" style="color:#999988;font-style:italic">#0]  0 [BACKEND] LOG:  FiniNuma allocIndex: 0.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上面的报错是因为宿主机的信号量设置的太小了</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 在宿主机执行 查看信号量相关设置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl -a</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> sem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipcs -ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain">  /proc/sys/kernel/sem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 结果如下</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------ Semaphore Limits --------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max number of arrays </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max semaphores per array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">250</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max semaphores system wide </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max ops per semop call </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">semaphore max value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32767</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#修改 vi /etc/sysctl.conf 的以下参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kernel.sem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50100</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">128256000</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50100</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2560</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysctl -p 生效</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#重启数据库即可</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rdtscp指令集问题">rdtscp指令集问题<a href="#rdtscp指令集问题" class="hash-link" aria-label="rdtscp指令集问题的直接链接" title="rdtscp指令集问题的直接链接">​</a></h3><p>OpenEluer确保安装rdtscp指令集，否则无法安装OpenGauss数据库</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 如何查看当前系统是否执行rdtscp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /boot/config-</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">uname</span><span class="token variable" style="color:#36acaa"> -r</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> TSC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /boot/config-</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">uname</span><span class="token variable" style="color:#36acaa"> -r</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> PERF_EVENT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="商业发行版">商业发行版<a href="#商业发行版" class="hash-link" aria-label="商业发行版的直接链接" title="商业发行版的直接链接">​</a></h3><p><a href="https://www.mogdb.io/" target="_blank" rel="noopener noreferrer">https://www.mogdb.io/</a>  <a href="https://enmotech.com/" target="_blank" rel="noopener noreferrer">https://enmotech.com/</a></p><p>MogDB是云和恩墨基于openGauss开源数据库进行完善增强的企业发行版。它围绕高性能、高可用、全密态、自动化运维、多数据库兼容等企业需求，应对企业用户需求新一代数据库的应用场景。其核心价值是高安全、高性能、高兼容、易运维和全天候的企业支持。</p><p><a href="https://www.vastdata.com.cn/" target="_blank" rel="noopener noreferrer">https://www.vastdata.com.cn/</a> 海量数据</p><p>Vastbase G100 基于openGauss内核的企业级关系型数据库</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="shell通过gsql查询">shell通过gsql查询<a href="#shell通过gsql查询" class="hash-link" aria-label="shell通过gsql查询的直接链接" title="shell通过gsql查询的直接链接">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">&quot;\pset format unaligned</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">SHOW ALL;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> show_all.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 通过此种方式查询出来的数据的格式很好看的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gsql -p </span><span class="token number" style="color:#36acaa">5432</span><span class="token plain"> -U sansec -W passwordxxx -f show_all.sql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="处理内存不足异常">处理内存不足异常<a href="#处理内存不足异常" class="hash-link" aria-label="处理内存不足异常的直接链接" title="处理内存不足异常的直接链接">​</a></h3><p><a href="https://docs.opengauss.org/zh/docs/5.0.0/docs/DatabaseOMGuide/%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3%E9%97%AE%E9%A2%98.html" target="_blank" rel="noopener noreferrer">https://docs.opengauss.org/zh/docs/5.0.0/docs/DatabaseOMGuide/%E5%86%85%E5%AD%98%E4%B8%8D%E8%B6%B3%E9%97%AE%E9%A2%98.html</a></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 默认可以使用5432端口登录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gsql -p </span><span class="token number" style="color:#36acaa">5432</span><span class="token plain"> -U username_xxx -W pwd_xxx -d instance_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 如果内存不足登录不了，可以使用5433端口（端口+1）登录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gsql -p </span><span class="token number" style="color:#36acaa">5433</span><span class="token plain"> -U username_xxx -W pwd_xxx -d instance_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 报错了，没调通</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> * from gs_total_memory_detail</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> contextname, sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">totalsize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">/1024/1024 sum, sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">freesize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">/1024/1024, count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> count from gs_shared_memory_detail group by contextname order by </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> desc limit </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> contextname, sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">totalsize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">/1024/1024 sum, sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">freesize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">/1024/1024, count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> count from gs_session_memory_detail group by contextname order by </span><span class="token function" style="color:#d73a49">sum</span><span class="token plain"> desc limit </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="数据库进入只读模式">数据库进入只读模式<a href="#数据库进入只读模式" class="hash-link" aria-label="数据库进入只读模式的直接链接" title="数据库进入只读模式的直接链接">​</a></h3><p><a href="https://docs.opengauss.org/zh/docs/5.0.0/docs/DatabaseOMGuide/%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E8%BE%BE%E5%88%B0%E9%98%88%E5%80%BC-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%AA%E8%AF%BB.html" target="_blank" rel="noopener noreferrer">https://docs.opengauss.org/zh/docs/5.0.0/docs/DatabaseOMGuide/%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E8%BE%BE%E5%88%B0%E9%98%88%E5%80%BC-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%AA%E8%AF%BB.html</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2025-02-07T11:48:50.000Z">2025年2月7日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/study/db/SQL/MySQL/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">MySQL</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/study/db/SQL/PostgreSQL/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">PostgreSQL</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#常用的工具" class="table-of-contents__link toc-highlight">常用的工具</a></li><li><a href="#如何查看版本" class="table-of-contents__link toc-highlight">如何查看版本</a></li><li><a href="#如何查看最大连接数" class="table-of-contents__link toc-highlight">如何查看最大连接数</a></li><li><a href="#如何修改最大连接数" class="table-of-contents__link toc-highlight">如何修改最大连接数</a></li><li><a href="#修改最大连接数报错" class="table-of-contents__link toc-highlight">修改最大连接数报错</a></li><li><a href="#rdtscp指令集问题" class="table-of-contents__link toc-highlight">rdtscp指令集问题</a></li><li><a href="#商业发行版" class="table-of-contents__link toc-highlight">商业发行版</a></li><li><a href="#shell通过gsql查询" class="table-of-contents__link toc-highlight">shell通过gsql查询</a></li><li><a href="#处理内存不足异常" class="table-of-contents__link toc-highlight">处理内存不足异常</a></li><li><a href="#数据库进入只读模式" class="table-of-contents__link toc-highlight">数据库进入只读模式</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 YiRanCN docs</div></div></div></footer></div>
<script src="/assets/js/runtime~main.48d4b20b.js"></script>
<script src="/assets/js/main.b2826b8f.js"></script>
</body>
</html>